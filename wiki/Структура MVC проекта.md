# Структура MVC-проекта с использованием Spring 

## ЗАДАЧА: к 21-му числу реализовать все страницы вашего предыдущего проекта (ТОЛЬКО НА ОТДАЧУ ДАННЫХ С ВЫБОРКОЙ ИЗ БД). 

* Весь проект следует концепции DI, то есть классы между собой имеют слабые связи, а правила их связывания описываются в отдельном блоке (например, xml-файле в виде бинов) и далее уже связываются между собой с помощью контейнера бинов Spring.

* Слабая связь означает, что при использовании агрегирования или композиции между классами A и B, в A указывается поле типа ИНТЕРФЕЙС, который имплементируется классом B.

* Каждый компонент (экземпляр класса) в Spring называется бином. Для того, чтобы объявить бин, есть несколько сопособов, сейчас пользуемся xml-конфигурацией. Указываем идентификатор бина, указываем класс, экземпляром которого является бин.

* Конфигурационным файлом для Spring MVC -проекта является файл dispatcherServlet-servlet.xml. Там мы указываем все компоненты. 

* DispatcherServlet - спринговый сервлет, который умеет обрабатывать запросы, передавать их выполнение контроллерам, от контроллеров получать результат, далее,подставляет их в страницу и отправляет клиенту.

* MVC - модель проектирования, подразумевающая наличие Представления (View, в нашем случае - это JSP-страницы, Fremarker-страницы). Каждая View в Spring представлена своим названием и непосредственно файлом. Модель - это данные, а Controller - это компонент, который обрабатывает запрос, генерирует название view и отправляет информацию о названии view и содержимое модели в DispatcherServlet.

* ViewResolver - компонент, который связывает название представления и конкретный файл представления (то есть по названию "users" находит файл webapp/WEB-INF/jsp/users.jsp). Это интерфейс, у которого есть реализации для JSP и для Freemarker

* DataSource - компонент, который отвечает за получение соединения с БД. Центральный компонент при взаимодействии с базой данных. Есть множество реализаций DataSource, самая примитивная - DriverManagerDataSource. Самая навороченная - HikairiConnectionPoolDataSource. Самая "хорошая" - TomcatConnectionPoolDataSource.

* JdbcTemplate - компонент Spring, позволяющий удобно работать с запросами к БД.

## Прикрутим Freemarker

* JSP - работает через движок Jasper. Читает JSP-страницу, генерирует на ее основе сервлет, а уже сервлет отдает HTML через PrintWriter. Плюсы - можно исполнять Java код прям в JSP (на самом деле он выполнится на сервере в сгенерированном сервлете), минусы - можно испольнять Java код (получается плохо читаемый код).

* Freemarker - компилирующий шаблонизатор. Читает ftl-страницу, вставляет данные, получает результат.

* Freemarker треубет своего ViewResolver.